{% extends "network/layout.html" %}

{% block body %}
    <h3>{{ profile_user.username }}</h3>
    <strong>Email address:</strong> {{ profile_user.email }}
    <br>
    <strong>Joined: </strong> {{ profile_user.date_joined.date }}
    <br>
    <strong>Followers: {{ profile_user.followers.count }}</strong>
    <br>
    <strong>Following: {{ profile_user.following.count }}</strong>
    <br>
    {% if user.is_authenticated %}
        {% if user.username != profile_user.username %}
            {% if user in profile_user.followers.all %}
                <form action="{% url 'follow_toggle' profile_user.username %}" method="POST">
                    {% csrf_token %}
                    <button class="btn-sm btn-primary">Unfollow</button>
                </form>
            {% else %}
                <form action="{% url 'follow_toggle' profile_user.username %}" method="POST">
                    {% csrf_token %}
                    <button class="btn-sm btn-primary">Follow</button>
                </form>
            {% endif %}
        {% endif %}
    {% endif %}
    <hr class="hr_light" id="hr">
    <strong style="font-size: 1.5rem">Posts</strong>
    <br>
    <br>

    {% for post in page_obj %}
    <div class="eachpost" id="post_box">
        <h6><a class="link_light link_class" href="{% url 'profile' post.creator %}">{{ post.creator }}</a></h6>
        <p>{{ post.post }}</p>
        <p style="font-size: 14px">{{ post.created }}</p>

        {% if user.is_authenticated %}
            {% if post.id in posts_lbtcu_id %}
            <form action="{% url 'decrease_likes' post.id %}">
                <button id="like" style="font-size: 16px; padding: 0; border: none; background: none" ><i class="fa fa-heart" style="font-size:16px; color:rgb(255, 9, 9)"></i></button>
                {{ post.likes_count }}
            </form>
            {% else %}
            <form action="{% url 'increase_likes' post.id %}">
                <button id="like" style="font-size: 16px; padding: 0; border: none; background: none" ><i class="fa fa-heart-o" style="font-size:16px; color:rgb(255, 9, 9)"></i></button>
                {{ post.likes_count }}
            </form>
            {% endif %}
        {% else %}
            <i class="fa fa-heart-o" style="font-size:16px; color:rgb(255, 9, 9)"></i> {{ post.likes_count }}
        {% endif %}

        <a class="link_light small_link link_class" href="{% url 'comments' post.id %}">Comments</a>
    </div>
    <br>
    {% endfor %}

    <nav aria-label="Page navigation example">
        <ul class="pagination">
            {% if page_obj.has_previous %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
            {% endif %}
            {% if page_obj.has_previous %}
            <li class="page-item"><a class="page-link" href="?page={{page_obj.previous_page_number}}">{{ page_obj.previous_page_number }}</a></li>
            {% endif %}
            <li class="page-item"><a class="page-link" href="?page={{page_obj.number}}">{{ page_obj.number }}</a></li>
            {% if page_obj.has_next %}
            <li class="page-item"><a class="page-link" href="?page={{page_obj.next_page_number}}">{{ page_obj.next_page_number }}</a></li>
            {% endif %}
            {% if page_obj.has_next%}
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            {% endif %}
        </ul>
      </nav>

{% endblock %}